int atomic_xchange(int *state_ptr);